# =======================================
# ðŸ“Š Internship Project: Web Scraping + EDA + Visualization + Dashboard
# =======================================

# âœ… TASK 1: Web Scraping
import requests
from bs4 import BeautifulSoup
import pandas as pd

url = "http://books.toscrape.com/catalogue/page-1.html"
response = requests.get(url)
soup = BeautifulSoup(response.text, "html.parser")

titles, prices, availability = [], [], []

for book in soup.find_all("article", class_="product_pod"):
    titles.append(book.h3.a["title"])
    prices.append(book.find("p", class_="price_color").text)
    availability.append(book.find("p", class_="instock availability").text.strip())

df = pd.DataFrame({"Title": titles, "Price": prices, "Availability": availability})

# Save dataset
df.to_csv("books.csv", index=False)
print("âœ… Data scraped and saved as books.csv")
print(df.head())


# âœ… TASK 2: Exploratory Data Analysis (EDA)
print("\n--- Dataset Info ---")
print(df.info())

# Convert Price column to numeric
df["Price"] = df["Price"].str.replace("Â£", "", regex=True).astype(float)

# Availability counts
print("\n--- Availability Counts ---")
print(df["Availability"].value_counts())

# Basic stats
print("\n--- Price Description ---")
print(df["Price"].describe())


# âœ… TASK 3: Data Visualization
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px

# Price distribution
fig = px.histogram(df, x="Price", nbins=20, title="Price Distribution of Books")
fig.show()

# Availability (Pie Chart)
fig = px.pie(df, names="Availability", title="Books Availability Status")
fig.show()

# Average Price by Availability
avg_price = df.groupby("Availability")["Price"].mean().reset_index()
fig = px.bar(avg_price, x="Availability", y="Price", title="Average Price by Availability", color="Availability")
fig.show()

# Outlier detection
fig = px.box(df, y="Price", title="Price Outliers in Books Dataset")
fig.show()


# âœ… TASK 4: Insights
from IPython.display import display, Markdown

summary = """
# ðŸ“Š Data Insights

1. **Most books are priced between Â£20â€“40.**
2. **Majority of books are In Stock**, only a few are Out of Stock.
3. **Out-of-stock books are generally more expensive**.
4. **Some rare books priced > Â£50** â†’ likely collectorâ€™s editions.

âœ… These insights can help publishers, customers, and businesses make better decisions.
"""

display(Markdown(summary))


# âœ… TASK 5: Final Dashboard / Report
print("\nDashboard Ready with Interactive Charts & Insights ðŸŽ¯")
